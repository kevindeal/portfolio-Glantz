# Wordpress Storybook/Timber Starter Kit

## Some notes worth mentioning
- Uses [Timber](https://www.upstatement.com/timber/) as the theme's templating framework.
- Uses [Storybook](https://storybook.js.org/) as the component library.
- WordPress theme files use the Storybook component files.
- This theme is a fork of the [Emulsify](https://www.emulsify.info/) [WordPress repo](https://github.com/emulsify-ds/emulsify-wordpress-theme).

## Requirements

Make sure all dependencies have been installed before moving on:

* [Lando](https://docs.lando.dev/basics/installation.html)
* [Composer](https://getcomposer.org/download/)
* [Node.js](http://nodejs.org/) >= 12.x.x
* [Yarn](https://yarnpkg.com/en/docs/install)

## Quick start

### Install dependencies
If your computer is missing any of the above dependencies☝️, please download them.

### Environment setup steps
1. Move into the root folder of your project
2. Start up lando - `lando start`
3. Install node modules and build the site - `cd wp-content/themes/storybook-timber; yarn setup`

### Troubleshooting
  If you receive the message "Timber not activated"
  Try running `composer install`
  If message still persists
  Run `lando composer install` from theme directory.

### WordPress setup steps
1. Copy the `wp-config-sample.php` and rename it `wp-config.php`
2. Update the lines 22-32 with this data:
```php
/** The name of the database for WordPress */
define( 'DB_NAME', 'wordpress' );

/** MySQL database username */
define( 'DB_USER', 'wordpress' );

/** MySQL database password */
define( 'DB_PASSWORD', 'wordpress' );

/** MySQL hostname */
define( 'DB_HOST', 'database' );
```
3. In your browser, navigate to https://southleft.lndo.site/ (one of the URLs generated by the `lando start`) and go through the standard WordPress site setup. **Note**: you might get a "Your connection is not private" message, but it's ok to bypass it.
4. Update the theme to use the Southleft ECL theme [here](https://southleft.lndo.site/wp-admin/themes.php) and activate it (Appearance > Themes).

### WordPress multisite setup
1. Open `wp-config.php` and add this line directly above the database settings:
```php
define( 'WP_ALLOW_MULTISITE', true );
```
2. In your browser, navigate to [Tools > Network Setup](https://southleft.lndo.site/wp-admin/network.php) and click "Install".
3. Refresh the page and log back in.

### WordPress and Storybook common commands
_These commands are to be run from the theme directory_
- `yarn develop` - Spins up a localhost of the WordPress site as well as one for Storybook with reloading/css injection.
- `yarn build` - Builds all WordPress file assets for production.
- `yarn storybook` - Spins up a localhost for Storybook with reloading/css injection.
- `yarn wp` - Spins up a localhost for WordPress with reloading/css injection.
- `yarn build-storybook` - Builds all Storybook file assets for production.
